// Configuration for GitHub Pages deployment
// This file is automatically generated during the build process
// Default configuration for static deployment

window.APP_CONFIG = {
    // API endpoint for secure form submissions (NO database keys exposed!)
    // Auto-detect deployment platform
    API_ENDPOINT: (function() {
        if (window.location.hostname.includes('netlify.app') || 
            window.location.hostname.includes('netlify.com')) {
            return '/.netlify/functions/submit-review'; // Netlify serverless function
        } else {
            return null; // GitHub Pages - no serverless functions available
        }
    })(),
    
    // Admin configuration (will be handled server-side)
    ADMIN_PASSWORD: null, // Moved to server-side for security
    
    // GitHub configuration (for auto-deployment when reviews are approved)
    PERSONAL_ACCESS_TOKEN: null, // Personal access token for triggering deployments
    REPO_NAME: null, // Repository in format 'username/repo-name'
    
    // Feature flags
    ENABLE_API_SUBMISSION: (function() {
        // Only enable API submission on Netlify where functions are available
        return window.location.hostname.includes('netlify.app') || 
               window.location.hostname.includes('netlify.com');
    })(), // Uses secure API endpoint only on Netlify
    FALLBACK_TO_GEOJSON: true, // Always maintain static data fallback
    ENABLE_AUTO_DEPLOY: false, // Set to true when GitHub token is configured
    
    // App settings
    MAP_CENTER: [49.251, -123.060],
    MAP_ZOOM: 11,
    GEOJSON_PATH: 'data/fountains_processed.geojson',
    
    // App metadata
    VERSION: '1.0.0',
    DEPLOYMENT_TYPE: (function() {
        if (window.location.hostname.includes('netlify.app') || 
            window.location.hostname.includes('netlify.com')) {
            return 'netlify';
        } else if (window.location.hostname.includes('github.io')) {
            return 'github-pages';
        } else {
            return 'custom';
        }
    })()
};

// Deployment info
console.log(`üåê Deployment: ${window.APP_CONFIG.DEPLOYMENT_TYPE}`);
if (window.APP_CONFIG.ENABLE_API_SUBMISSION) {
    console.log('üîê API submission enabled - using secure serverless functions');
    console.log('‚úÖ Database credentials are protected server-side');
} else {
    console.log('üìÅ Static mode - review submissions disabled on this platform');
    console.log('üí° For review functionality, use the Netlify deployment');
}
